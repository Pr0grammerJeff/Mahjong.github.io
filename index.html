<!DOCTYPE html>
<html>
  <head>
    <title>麻雀計算機</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <header>
      <h1>東圈東局</h1>
      <div class="function-btn-container">
        <button class="function-btn">
          <div>
            <img src="images/start.png" alt="Create" width="60" height="60" />
          </div>
          <span>創建牌局</span>
        </button>
        <button class="function-btn">
          <div>
            <img src="images/reset.png" alt="Reset" width="60" height="60" />
          </div>
          <span>重設</span>
        </button>
        <button class="function-btn">
          <div>
            <img src="images/dealer.png" alt="Dealer" width="60" height="60" />
          </div>
          <span>莊家設定</span>
        </button>
        <button class="function-btn">
          <div>
            <img src="images/giveup.png" alt="Giveup" width="60" height="60" />
          </div>
          <span>拉數/投降</span>
        </button>
        <button class="function-btn">
          <div>
            <img
              src="data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22800px%22%20height%3D%22800px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%3E%0A%20%20%3Cg%20id%3D%22Edit%20%2F%20Add_Plus_Circle%22%3E%0A%20%20%20%20%3Cpath%20id%3D%22Vector%22%20d%3D%22M8%2012H12M12%2012H16M12%2012V16M12%2012V8M12%2021C7.02944%2021%203%2016.9706%203%2012C3%207.02944%207.02944%203%2012%203C16.9706%203%2021%207.02944%2021%2012C21%2016.9706%2016.9706%2021%2012%2021Z%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E"
              alt="Icon"
              width="60"
              height="60"
            />
          </div>
          <span>更多</span>
        </button>
      </div>
      <div class="function-btn-container">
        <button class="function-btn">
          <div>
            <img src="images/swap.png" alt="Swap" width="60" height="60" />
          </div>
          <span>換人換位</span>
        </button>
        <button class="function-btn">
          <div>
            <img
              src="images/player.png"
              alt="Add Player"
              width="60"
              height="60"
            />
          </div>
          <span>新增玩家</span>
        </button>
        <button class="function-btn">
          <div>
            <img
              src="images/cashout.png"
              alt="Cashout"
              width="60"
              height="60"
            />
          </div>
          <span>找數</span>
        </button>
        <button class="function-btn">
          <div>
            <img src="images/share.png" alt="Share" width="60" height="60" />
          </div>
          <span>分享賽果</span>
        </button>
        <button class="function-btn" onclick="dicing()">
          <div>
            <img src="images/dice.png" alt="Dicing" width="60" height="60" />
          </div>
          <span>擲骰</span>
        </button>
      </div>
    </header>
    <main>
      <div class="main-container">
        <button class="sit-btn" onclick="openPopup(1)">
          <span>Player 1</span>
        </button>
      </div>
      <div class="main-container">
        <button class="sit-btn" onclick="openPopup(2)">
          <span>Player 2</span>
        </button>
        <button class="skip-btn">
          <span>流局</span>
        </button>
        <button class="sit-btn" onclick="openPopup(3)">
          <span>Player 3</span>
        </button>
      </div>
      <div class="main-container">
        <button class="sit-btn" onclick="openPopup(4)">
          <span>Player 4</span>
        </button>
      </div>
      <footer>
        <div class="function-btn-container">
          <button class="page-btn"><span>戰況</span></button>
          <button class="page-btn"><span>統計</span></button>
        </div>
      </footer>
    </main>
  </body>
</html>

<script>
  function dicing() {
    var diceRoll1 = Math.floor(Math.random() * 6) + 1;
    var diceRoll2 = Math.floor(Math.random() * 6) + 1;
    var diceRoll3 = Math.floor(Math.random() * 6) + 1;
    var sum = diceRoll1 + diceRoll2 + diceRoll3;

    // Create a popup screen element
    var screen = document.createElement("div");
    screen.classList.add("popup-screen");

    // Create a popup content container
    var content = document.createElement("div");
    content.classList.add("popup-content");

    // Create a close button
    var closeButton = document.createElement("button");
    closeButton.innerHTML = "x";
    closeButton.classList.add("popup-close-button");
    closeButton.style.fontWeight = "bold";
    closeButton.style.fontSize = "30px";
    closeButton.style.position = "absolute";
    closeButton.style.top = "10px";
    closeButton.style.right = "10px";

    // Create a sum number display
    var sumDisplay = document.createElement("div");
    sumDisplay.innerHTML = sum;
    sumDisplay.style.fontWeight = "bold";
    sumDisplay.style.fontSize = "100px";
    sumDisplay.style.textAlign = "center";
    sumDisplay.style.marginBottom = "10px";

    // Create a row for dice roll variables
    var diceRow = document.createElement("div");
    diceRow.style.display = "flex";
    diceRow.style.justifyContent = "center";

    // Create dice roll variable elements
    var diceVariable1 = document.createElement("div");
    diceVariable1.style.fontWeight = "bold";
    diceVariable1.style.fontSize = "24px";
    diceVariable1.style.marginRight = "10px";

    var diceVariable2 = document.createElement("div");
    diceVariable2.style.fontWeight = "bold";
    diceVariable2.style.fontSize = "24px";
    diceVariable2.style.marginRight = "10px";

    var diceVariable3 = document.createElement("div");
    diceVariable3.style.fontWeight = "bold";
    diceVariable3.style.fontSize = "24px";

    // Set the dice roll variable values
    diceVariable1.innerHTML = diceRoll1;
    diceVariable2.innerHTML = diceRoll2;
    diceVariable3.innerHTML = diceRoll3;

    // Display images based on dice roll values
    if (diceRoll1 === 1) {
      var img1 = document.createElement("img");
      img1.src = "images/dice1.png";
      img1.style.width = "100px";
      img1.style.height = "100px";
      diceVariable1.appendChild(img1);
    } else if (diceRoll1 === 2) {
      var img2 = document.createElement("img");
      img2.src = "images/dice2.png";
      img2.style.width = "100px";
      img2.style.height = "100px";
      diceVariable1.appendChild(img2);
    } else if (diceRoll1 === 3) {
      var img3 = document.createElement("img");
      img3.src = "images/dice3.png";
      img3.style.width = "100px";
      img3.style.height = "100px";
      diceVariable1.appendChild(img3);
    } else if (diceRoll1 === 4) {
      var img4 = document.createElement("img");
      img4.src = "images/dice4.png";
      img4.style.width = "100px";
      img4.style.height = "100px";
      diceVariable1.appendChild(img4);
    } else if (diceRoll1 === 5) {
      var img5 = document.createElement("img");
      img5.src = "images/dice5.png";
      img5.style.width = "100px";
      img5.style.height = "100px";
      diceVariable1.appendChild(img5);
    } else if (diceRoll1 === 6) {
      var img6 = document.createElement("img");
      img6.src = "images/dice6.png";
      img6.style.width = "100px";
      img6.style.height = "100px";
      diceVariable1.appendChild(img6);
    }

    if (diceRoll2 === 1) {
      var img1 = document.createElement("img");
      img1.src = "images/dice1.png";
      img1.style.width = "100px";
      img1.style.height = "100px";
      diceVariable2.appendChild(img1);
    } else if (diceRoll2 === 2) {
      var img2 = document.createElement("img");
      img2.src = "images/dice2.png";
      img2.style.width = "100px";
      img2.style.height = "100px";
      diceVariable2.appendChild(img2);
    } else if (diceRoll2 === 3) {
      var img3 = document.createElement("img");
      img3.src = "images/dice3.png";
      img3.style.width = "100px";
      img3.style.height = "100px";
      diceVariable2.appendChild(img3);
    } else if (diceRoll2 === 4) {
      var img4 = document.createElement("img");
      img4.src = "images/dice4.png";
      img4.style.width = "100px";
      img4.style.height = "100px";
      diceVariable2.appendChild(img4);
    } else if (diceRoll2 === 5) {
      var img5 = document.createElement("img");
      img5.src = "images/dice5.png";
      img5.style.width = "100px";
      img5.style.height = "100px";
      diceVariable2.appendChild(img5);
    } else if (diceRoll2 === 6) {
      var img6 = document.createElement("img");
      img6.src = "images/dice6.png";
      img6.style.width = "100px";
      img6.style.height = "100px";
      diceVariable2.appendChild(img6);
    }

    if (diceRoll3 === 1) {
      var img1 = document.createElement("img");
      img1.src = "images/dice1.png";
      img1.style.width = "100px";
      img1.style.height = "100px";
      diceVariable3.appendChild(img1);
    } else if (diceRoll3 === 2) {
      var img2 = document.createElement("img");
      img2.src = "images/dice2.png";
      img2.style.width = "100px";
      img2.style.height = "100px";
      diceVariable3.appendChild(img2);
    } else if (diceRoll3 === 3) {
      var img3 = document.createElement("img");
      img3.src = "images/dice3.png";
      img3.style.width = "100px";
      img3.style.height = "100px";
      diceVariable3.appendChild(img3);
    } else if (diceRoll3 === 4) {
      var img4 = document.createElement("img");
      img4.src = "images/dice4.png";
      img4.style.width = "100px";
      img4.style.height = "100px";
      diceVariable3.appendChild(img4);
    } else if (diceRoll3 === 5) {
      var img5 = document.createElement("img");
      img5.src = "images/dice5.png";
      img5.style.width = "100px";
      img5.style.height = "100px";
      diceVariable3.appendChild(img5);
    } else if (diceRoll3 === 6) {
      var img6 = document.createElement("img");
      img6.src = "images/dice6.png";
      img6.style.width = "100px";
      img6.style.height = "100px";
      diceVariable3.appendChild(img6);
    }

    // Append the dice roll variables to the dice row
    diceRow.appendChild(diceVariable1);
    diceRow.appendChild(diceVariable2);
    diceRow.appendChild(diceVariable3);

    // Append the sum, dice row, and close button to the popup content container
    content.appendChild(closeButton);
    content.appendChild(sumDisplay);
    content.appendChild(diceRow);

    // Append the popup content container to the popup screen
    screen.appendChild(content);

    // Add event listener to the close button
    closeButton.addEventListener("click", closePopup);

    // Append the popup screen to the body
    document.body.appendChild(screen);
  }

  function closePopup() {
    var popupScreen = document.querySelector(".popup-screen");
    popupScreen.remove();
  }

  function openPopup(playerNumber) {
    // Create a popup screen element
    var screen = document.createElement("div");
    screen.classList.add("popup-screen");

    // Create a popup content container
    var content = document.createElement("div");
    content.classList.add("popup-content");

    // Create a close button
    var closeButton = document.createElement("button");
    closeButton.innerHTML = "x";
    closeButton.classList.add("popup-close-button");
    closeButton.style.fontWeight = "bold";
    closeButton.style.fontSize = "20px";
    closeButton.style.position = "absolute";
    closeButton.style.top = "10px";
    closeButton.style.right = "10px";

    // Add event listener to close the screen when the close button is clicked
    closeButton.addEventListener("click", function () {
      document.body.removeChild(screen);
    });

    // Create a title element
    var title = document.createElement("div");
    title.classList.add("popup-title");
    title.textContent = "Please choose an avatar and enter your name";
    title.style.fontWeight = "bold";
    title.style.fontSize = "28px";

    // Create a container for avatar selection
    var avatarContainer = document.createElement("div");
    avatarContainer.classList.add("avatar-container");

    // Create avatar images
    for (var i = 1; i <= 8; i++) {
      var avatar = document.createElement("img");
      avatar.src = "images/" + i + ".jpeg";
      avatar.classList.add("avatar-image");
      avatar.style.objectFit = "cover"; // Ensure the image fills the square container
      avatar.style.width = "100px"; // Set the width to the desired square size
      avatar.style.height = "100px"; // Set the height to the desired square size
      avatar.style.margin = "5px"; // Add some margin around each image

      avatar.addEventListener("click", function () {
        var selectedAvatar = this.src;
        var selectedAvatarPreview = document.querySelector(
          ".selected-avatar-preview"
        );
        selectedAvatarPreview.src = selectedAvatar;
      });

      avatarContainer.appendChild(avatar);
    }

    // Adjust container width based on window size
    var containerWidth = Math.min((100 + 10) * 4 + 10, window.innerWidth);
    avatarContainer.style.width = containerWidth + "px";
    avatarContainer.style.overflowX = "auto";

    // Create a text input element
    var input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Enter player name";
    input.classList.add("popup-input");
    input.style.textAlign = "center";
    input.style.height = "90px";
    input.style.fontWeight = "bold";
    input.style.fontSize = "28px";

    // Create a submit button
    var submitBtn = document.createElement("button");
    submitBtn.innerHTML = "Submit";
    submitBtn.classList.add("popup-button");
    submitBtn.style.fontWeight = "bold";
    submitBtn.style.fontSize = "28px";

    // Create a selected avatar preview element
    var selectedAvatarPreview = document.createElement("img");
    selectedAvatarPreview.classList.add("selected-avatar-preview");
    selectedAvatarPreview.src = "default-avatar.png";

    // Add the elements to the content container
    content.appendChild(closeButton);
    content.appendChild(title);
    content.appendChild(avatarContainer);
    content.appendChild(selectedAvatarPreview);
    content.appendChild(input);
    content.appendChild(submitBtn);

    // Add the content container to the screen
    screen.appendChild(content);

    // Append the screen to the body
    document.body.appendChild(screen);

    // Add event listener to the submit button
    submitBtn.addEventListener("click", function () {
      var playerName = input.value;

      // Show the player name in the middle of the corresponding button
      var button = document.querySelector(
        ".sit-btn:nth-of-type(" + playerNumber + ")"
      );
      button.innerHTML = playerName;
      button.style.fontWeight = "bold";
      button.style.fontSize = "28px";

      // Show the chosen image above the player name
      var selectedAvatar = selectedAvatarPreview.src;
      var avatarImage = document.createElement("img");
      avatarImage.src = selectedAvatar;
      avatarImage.style.display = "block";
      avatarImage.style.margin = "auto";
      avatarImage.style.width = "200px"; // Set the desired width

      // Apply square cropping
      avatarImage.style.objectFit = "cover";
      avatarImage.style.objectPosition = "center";

      // Apply square dimensions
      avatarImage.style.height = "200px";

      button.prepend(avatarImage);

      // Remove the screen
      document.body.removeChild(screen);
    });

    // Add event listener to close the screen when clicking outside of it
    window.addEventListener("click", function (event) {
      if (event.target === screen) {
        document.body.removeChild(screen);
      }
    });
  }
</script>
